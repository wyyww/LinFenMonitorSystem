var controllers=angular.module("myApp.controller",[]);angular.module("myApp.controller").controller("applicationController",["$scope","$filter","init",function(e,t,n){n.currentDepartment().then(function(t){t.result.children.unshift(t.result),e.departments=t.result.children}),e.applicationFormSubmit=function(){switch("直系亲属"==e.staffRelationship?e.relationship=2:e.relationship=1,e.staffJob){case"县级党员干部":e.Job=1;break;case"科级党员干部":e.Job=2;break;case"社区基层人员":e.Job=3;break;case"一般工作人员":e.Job=4;break;default:e.Job=1}"丧葬"==e.eventType?e.declareEventType=2:e.declareEventType=1,e.eventCount||(e.eventCount=1),e.tableCount||(e.tableCount=50),e.peopleCount||(e.peopleCount=50),e.carCount||(e.carCount=1),e.eventDate?e.eventCreateDate=t("date")(e.eventDate,"yyyy-MM-dd HH:mm:ss"):e.eventCreateDate="","根组织"==e.staffOrgId?e.staffDepartment="1":"新部门"==e.staffOrgId?e.staffDepartment="2":"Ramirez"==e.staffOrgId?e.staffDepartment="3":"City"==e.staffOrgId?e.staffDepartment="4":"Dr.Tai"==e.staffOrgId?e.staffDepartment="5":"老板"==e.staffOrgId?e.staffDepartment="5":e.staffDepartment="1";var s={staff:e.staff,staffRelationship:e.relationship,staffPoliticalStatus:e.staffPoliticalStatus,staffJob:e.Job,staffSpouse:e.staffSpouse,staffPhone:e.staffPhone,eventType:e.declareEventType,eventCount:e.eventCount,eventDate:e.eventCreateDate,location:e.location,tableCount:e.tableCount,peopleCount:e.peopleCount,peopleRange:e.peopleRange,carCount:e.carCount,carSource:e.carSource,selfPromise:e.selfPromise,promisePeople:e.promisePeople,staffOrgId:e.staffDepartment};e.applicationForm.files.$valid&&e.files&&n.upload(e.files[0]).then(function(t){e.attachmentFileCode=t.result.code,e.attachmentFileCode||(e.attachmentFileCode=""),n.declaration(s,e.attachmentFileCode).then(function(e){swal("申报成功","","success")},function(){swal("申报失败，请重试","","success")})},function(){})}}]),angular.module("myApp.controller").controller("approveController",["$scope","init",function(e,t){e.staf="",e.isHave=-1,e.page=1,e.start=0,t.approveQuery(e.staf,e.isHave,e.page,e.start).then(function(t){e.messages=t.result,e.pageNum=Math.ceil((t.total-14)/9)},function(){}),e.appQuery=function(){t.approveQuery(e.staf,e.isHave,e.page,e.start).then(function(t){e.messages=t.result,e.pageNum=Math.ceil((t.total-14)/9)},function(){})},e.state0=function(){e.isState="待审核",e.isHave=-1,t.approveQuery(e.staf,e.isHave,e.page,e.start).then(function(t){e.messages=t.result,e.pageNum=Math.ceil((t.total-14)/9)},function(){})},e.state1=function(){e.isState="通过",e.isHave=1,t.approveQuery(e.staf,e.isHave,e.page,e.start).then(function(t){e.messages=t.result,e.pageNum=Math.ceil((t.total-14)/9)},function(){})},e.state2=function(){e.isState="拒绝",e.isHave=2,t.approveQuery(e.staf,e.isHave,e.page,e.start).then(function(t){e.messages=t.result,e.pageNum=Math.ceil((t.total-14)/9)},function(){})},e.onePage=function(){e.page=1,e.start=0,t.approveQuery(e.staf,e.isHave,e.page,e.start).then(function(t){e.messages=t.result},function(){})},e.before=function(){e.page=e.page-1,e.start=e.start-9,t.approveQuery(e.staf,e.isHave,e.page,e.start).then(function(t){e.messages=t.result},function(){})},e.after=function(){0!=e.messages.length&&(e.page=e.page+1,e.start=e.start+9,t.approveQuery(e.staf,e.isHave,e.page,e.start).then(function(t){e.messages=t.result},function(){}))},e.lastPage=function(){e.page=e.pageNum,e.start=9*(e.pageNum-1)+1,t.approveQuery(e.staf,e.isHave,e.page,e.start).then(function(t){e.messages=t.result},function(){})},e.approvePositiveSequenceOrder=function(n){e.messages=t.positiveSequenceOrder(n,e.messages)},e.approveInvertedOrder=function(n){e.messages=t.invertedOrder(n,e.messages)},e.pass=function(n){e.sure=function(){console.log(n),t.isApprove(n,"1",e.content1).then(function(){t.approveQuery(e.staf,e.isHave,e.page,e.start).then(function(t){e.messages=t.result,e.pageNum=Math.ceil((t.total-14)/9)},function(){}),swal({title:"审批成功"})},function(){})}},e.notPass=function(n){e.refuse=function(){console.log(n),t.isApprove(n,2,e.content2).then(function(){t.approveQuery(e.staf,e.isHave,e.page,e.start).then(function(t){e.messages=t.result,e.pageNum=Math.ceil((t.total-14)/9)},function(){}),swal({title:"审批成功"})},function(){})}},e.md=function(n){t.details(n).then(function(t){e.isData=t,$("#myModal2").modal("toggle")},function(){})}}]),angular.module("myApp.controller").controller("combinationController",["$scope","$filter","init",function(e,t,n){e.messages=[],e.initialPage=1,e.isPage=9,e.declarePreciseQuery=function(){e.isState&&"全部"!=e.isState?"婚嫁"==e.isState?e.eventType="1":e.eventType="2":e.eventType="0",e.isNum?"0-50'"==e.isNum?(e.peopleCountMin="0",e.peopleCountMax="50"):"50-100'"==e.isNum?(e.peopleCountMin="50",e.peopleCountMax="100"):"100-150'"==e.isNum?(e.peopleCountMin="100",e.peopleCountMax="150"):"150-200'"==e.isNum&&(e.peopleCountMin="150",e.peopleCountMax="200"):(e.peopleCountMin="0",e.peopleCountMax="50"),e.eventCreateTimeFrom=t("date")(e.beforTime,"yy-MM-dd"),e.eventCreateTimeTo=t("date")(e.afterTime,"yy-MM-dd"),e.eventTimeFrom=t("date")(e.dinnerBeforTime,"yy-MM-dd"),e.eventTimeTo=t("date")(e.dinnerAfterTime,"yy-MM-dd"),n.DeclareResultsQuery(e.eventType,e.peopleCountMin,e.peopleCountMax,e.eventCreateTimeFrom,e.eventCreateTimeTo,e.eventTimeFrom,e.eventTimeTo).then(function(t){e.messages=t.result,console.log(t.total),e.pageNum=Math.ceil(t.total/e.isPage),e.initialPage=1},function(e){console.log(e)})}}]),angular.module("myApp.controller").controller("pageController",["$scope","init",function(e,t){$.getScript("libs/simplify/simplify.js"),$.getScript("libs/jquery.slimscroll.min.js")}]),angular.module("myApp.controller").controller("preciseController",["$scope","init",function(e,t){setTimeout(function(){t.currentDepartment().then(function(t){t.result.children.unshift(t.result),e.departments=t.result.children})},200),e.isState="根组织",e.isPage=9,e.initialPage=1,e.preciseQuery=function(n){switch(n){case"根组织":n="1";break;case"新部门":n="4";break;case"Ramirez":n="5";break;case"City":n="6";break;case"Dr.tai":n="7"}e.isname||(e.isname=""),t.preciseResultQuery(e.isname,n).then(function(t){e.messages=t.result,e.pageNum=Math.ceil(e.messages.length/e.isPage)})}}]),angular.module("myApp.controller").controller("publicityController",["$scope","init",function(e,t){e.md=function(n){t.details(n).then(function(t){e.isData=t,$("#myModal2").modal("toggle")},function(){})},e.user={staff:"",bulletinStatus:-1,page:1,start:0,limit:9},t.publicQuery(e.user).then(function(t){e.messages=t.result,e.pageNum=Math.ceil((t.total-14)/9)}),e.onePage=function(){e.user.page=1,e.user.start=0,t.publicQuery(e.user).then(function(t){e.messages=t.result},function(){})},e.befor=function(){e.user.page=e.user.page-1,e.user.start=e.user.start-9,t.publicQuery(e.user).then(function(t){e.messages=t.result},function(){})},e.after=function(){0!=e.messages.length&&(e.user.page=e.user.page+1,e.user.start=e.user.start+9,t.publicQuery(e.user).then(function(t){e.messages=t.result},function(){}))},e.lastPage=function(){e.user.page=e.pageNum,e.user.start=9*(e.pageNum-1)+1,t.publicQuery(e.user).then(function(t){e.messages=t.result},function(){})},e.publicitypositiveSequenceOrder=function(n){e.messages=t.positiveSequenceOrder(n,e.messages)},e.publicityinvertedOrder=function(n){e.messages=t.invertedOrder(n,e.messages)},e.publicQuery=function(){e.isname&&(e.user.staff=e.isname),t.publicQuery(e.user).then(function(t){e.messages=t.result,e.pageNum=Math.ceil((t.total-14)/9)})},e.state0=function(){e.isState="未公示",e.user.bulletinStatus=-1,t.publicQuery(e.user).then(function(t){e.messages=t.result,e.pageNum=Math.ceil((t.total-14)/9)},function(){})},e.state1=function(){e.isState="已公示",e.user.bulletinStatus=1,t.publicQuery(e.user).then(function(t){e.messages=t.result,e.pageNum=Math.ceil((t.total-14)/9)},function(){})},e.getId=function(n){e.publicTextSubmit=function(){e.userText={eventId:n,content:e.content1,attachmentFileCode:""},t.publicTextSubmit(e.userText).then(function(n){t.publicQuery(e.user).then(function(t){e.messages=t.result,e.pageNum=Math.ceil((t.total-14)/9)},function(e){console.log(e)}),swal({title:"修改完成"})},function(e){console.log(e)})}},e.getThisId=function(n){e.publicResuleSubmit=function(){e.userResult={eventId:n,content:e.content2,status:e.status,attachmentFileCode:""},t.publicResuleSubmit(e.userResult).then(function(n){t.publicQuery(e.user).then(function(t){e.messages=t.result,e.pageNum=Math.ceil((t.total-14)/9)},function(e){console.log(e)}),swal({title:"修改成功"})},function(e){console.log(e)})}}}]),angular.module("myApp.controller").controller("punishmentController",["$scope","init",function(e,t){e.messages=[{staff:"",staffOrgName:"",title:"",createTime:"",id:""}],e.user={staff:"",page:"",start:"",limit:""},e.user.page=1,e.user.start=0,e.user.limit=9;e.user;t.disciplinaryAwardFind(e.user).then(function(t){e.messages=t.result,e.pageNum=Math.ceil((t.total-14)/9)}),e.disciplinaryAwardFind=function(){e.isname&&(e.user.staff=e.isname),t.disciplinaryAwardFind(e.user).then(function(t){e.messages=t.result,e.pageNum=Math.ceil((t.total-14)/9)})},e.onePage=function(){e.user.page=1,e.user.start=0,t.disciplinaryAwardFind(e.user).then(function(t){e.messages=t.result},function(){})},e.befor=function(){e.user.page=e.user.page-1,e.user.start=e.user.start-9,t.disciplinaryAwardFind(e.user).then(function(t){e.messages=t.result},function(){})},e.after=function(){0!=e.messages.length&&(e.user.page=e.user.page+1,e.user.start=e.user.start+9,t.disciplinaryAwardFind(e.user).then(function(t){e.messages=t.result},function(){}))},e.lastPage=function(){e.user.page=e.pageNum,e.user.start=9*(e.pageNum-1)+1,t.disciplinaryAwardFind(e.user).then(function(t){e.messages=t.result},function(){})},e.punishmentPositiveSequenceOrder=function(n){e.messages=t.positiveSequenceOrder(n,e.messages)},e.punishmentInvertedOrder=function(n){e.messages=t.invertedOrder(n,e.messages)},e.disciplinaryAwardAlter=function(){e.theMessages.id=e.id,t.disciplinaryAwardAlter(e.theMessages).then(function(e){},function(e){console.log(e)}),t.disciplinaryAwardFind(e.user).then(function(t){e.messages=t.result},function(e){console.log(e)})},e.theMessages=[{id:"",title:"",staff:"",content:"",staffOrg:""}],e.disciplinaryAwardGet=function(n){$("#myModal").modal("toggle"),e.id=n,e.userGet={id:n},t.disciplinaryAwardGet(e.userGet).then(function(t){e.theMessages=t.result},function(e){console.log(e)})},setTimeout(function(){t.currentDepartment().then(function(t){e.departments=t.result.children})},200),e.deleteGetId=function(n){e.disciplinaryAwardDeleteData=function(){console.log(n),e.userDelete={id:n};var s=e.userDelete;t.disciplinaryAwardDeleteData(s).then(function(n){t.disciplinaryAwardFind(e.user).then(function(t){e.messages=t.result},function(e){console.log(e)}),swal({title:"已删除"})},function(e){console.log(e)})}},e.disciplinaryAwardAddData=function(){e.userAdd={title:e.title,content:e.content,staff:e.staff,staffOrgId:e.staffOrgId};var n=e.userAdd;t.disciplinaryAwardAddData(n).then(function(n){t.disciplinaryAwardFind(e.user).then(function(t){e.messages=t.result},function(e){console.log(e)}),swal({title:"添加完成"})},function(e){console.log(e)})}}]),angular.module("myApp.controller").controller("responsibilityController",["$scope","init",function(e,t){e.messages=[{staff:"",staffOrgName:"",title:"",createTime:"",id:""}],e.user={staff:"",page:"",start:"",limit:""},e.user.page=1,e.user.start=0,e.user.limit=9;e.user;t.openBulletinToFind(e.user).then(function(t){e.messages=t.result,e.pageNum=Math.ceil((t.total-14)/9)}),e.openBulletinToFind=function(){e.isname&&(e.user.staff=e.isname),t.openBulletinToFind(e.user).then(function(t){e.messages=t.result,e.pageNum=Math.ceil((t.total-14)/9)})},e.onePage=function(){e.user.page=1,e.user.start=0,t.openBulletinToFind(e.user).then(function(t){e.messages=t.result},function(){})},e.befor=function(){e.user.page=e.user.page-1,e.user.start=e.user.start-9,t.openBulletinToFind(e.user).then(function(t){e.messages=t.result},function(){})},e.after=function(){0!=e.messages.length&&(e.user.page=e.user.page+1,e.user.start=e.user.start+9,t.openBulletinToFind(e.user).then(function(t){e.messages=t.result},function(){}))},e.lastPage=function(){e.user.page=e.pageNum,e.user.start=9*(e.pageNum-1)+1,t.openBulletinToFind(e.user).then(function(t){e.messages=t.result},function(){})},e.publicNotificationPositiveSequenceOrder=function(n){e.messages=t.positiveSequenceOrder(n,e.messages)},e.publicNotificationInvertedOrder=function(n){e.messages=t.invertedOrder(n,e.messages)},e.openBulletinToAlter=function(){e.theMessages.id=e.id,t.openBulletinToAlter(e.theMessages),console.log(e.id),e.userDate={id:e.id,title:e.title,content:e.content,staff:e.staff,staffOrgId:e.staffOrgId},t.openBulletinToAlter(e.userDate).then(function(e){},function(e){console.log(e)}),t.openBulletinToFind(e.user).then(function(t){e.messages=t.result},function(e){console.log(e)})},e.theMessages=[{id:"",title:"",staff:"",content:"",staffOrg:""}],e.openBulletinToAlterGet=function(n){$("#myModal").modal("toggle"),e.id=n,e.userGet={id:n},t.openBulletinToAlterGet(e.userGet).then(function(t){e.theMessages=t.result},function(e){console.log(e)})},setTimeout(function(){t.currentDepartment().then(function(t){t.result.children.unshift(t.result),e.departments=t.result.children})},200),e.deleteGetId=function(n){e.deleteData=function(){e.userDelete={id:n};var s=e.userDelete;t.deleteData(s).then(function(n){t.openBulletinToFind(e.user).then(function(t){e.messages=t.result},function(e){console.log(e)}),swal({title:"已删除"})},function(e){console.log(e)})}},e.openBulletinToAddData=function(){e.isTitle=!0,e.isStaff=!0,e.isStaffOrgId=!0,e.isContent=!0,e.userAdd={title:e.title,content:e.content,staff:e.staff,staffOrgId:e.staffOrgId},t.openBulletinToAddData(e.userAdd).then(function(n){t.openBulletinToFind(e.user).then(function(t){e.messages=t.result},function(e){console.log(e)}),swal({title:"添加完成"})},function(e){console.log(e)})}}]),angular.module("myApp.controller").controller("roleManagementController",["$scope","init",function(e,t){e.messages=[{name:"",id:""}],e.user={page:"",start:"",limit:"",roleId:""},e.user.page=1,e.user.start=0,e.user.limit=9,e.subsystem=[{item:"",code:"1"},{item:"",code:"2"},{item:"",code:"3"},{item:"",code:"4"},{item:"",code:"1.1"},{item:"",code:"1.2"},{item:"",code:"1.3"},{item:"",code:"1.4"},{item:"",code:"1.5"},{item:"",code:"1.6"},{item:"",code:"1.7"},{item:"",code:"1.8"},{item:"",code:"1.9"},{item:"",code:"1.10"},{item:"",code:"1.11"},{item:"",code:"1.12"},{item:"",code:"1.13"},{item:"",code:"1.14"},{item:"",code:"1.15"},{item:"",code:"1.16"},{item:"",code:"1.17"},{item:"",code:"1.18"},{item:"",code:"2.1"},{item:"",code:"2.2"},{item:"",code:"2.3"},{item:"",code:"2.4"},{item:"",code:"2.5"},{item:"",code:"3.1"},{item:"",code:"3.2"},{item:"",code:"3.3"},{item:"",code:"4.1"},{item:"",code:"4.2"},{item:"",code:"4.3"}];var n=e.user;t.roleManagement(n).then(function(t){e.messages=t.result,e.pageNum=Math.ceil((t.total-14)/9)+1},function(e){console.log(e.result)}),e.onePage=function(){e.user.page=1,e.user.start=0,t.roleManagement(e.user).then(function(t){e.messages=t.result},function(){})},e.befor=function(){e.user.page=e.user.page-1,e.user.start=e.user.start-9,t.roleManagementd(e.user).then(function(t){e.messages=t.result},function(){})},e.after=function(){0!=e.messages.length&&(e.user.page=e.user.page+1,e.user.start=e.user.start+9,t.roleManagement(e.user).then(function(t){e.messages=t.result},function(){}))},e.lastPage=function(){e.user.page=e.pageNum,e.user.start=9*(e.pageNum-1)+1,t.roleManagement(e.user).then(function(t){e.messages=t.result},function(){})},e.isSelected=function(e){e.item=!e.item},e.roleManagementGet=function(n){$("#myModal").modal("toggle"),e.user.roleId=n,t.roleManagementGet(e.user).then(function(t){e.roleName=t.result.name,e.roleCheck=t.result.functions;for(var n=0;n<e.roleCheck.length;n++)e.subsystem.forEach(function(t){t.code==e.roleCheck[n].code&&(t.item=!0)})},function(e){console.log(e)})},e.roleManagementUpdateAlter=function(s){var o=[];e.subsystem.forEach(function(e){1==e.item&&o.push(e.code)}),t.roleManagementUpdateAlter(e.user.roleId,e.roleName,o).then(function(s){t.roleManagement(n).then(function(t){e.messages=t.result,swal("修改成功")},function(e){console.log(e)})},function(e){console.log(e)})},e.roleManagementDelete=function(s){e.userDelete={id:s};var o=e.userDelete;t.roleManagementDelete(o).then(function(s){1==s.success&&t.roleManagement(n).then(function(t){e.messages=t.result,e.pageNum=Math.ceil((t.total-14)/9)+1},function(e){console.log(e)})},function(e){console.log(e)})},e.clearSubsystem=function(){e.subsystem.forEach(function(e){e.item=""})},e.roleManagementAdd=function(){var s=[];e.subsystem.forEach(function(e){1==e.item&&s.push(e.code)}),e.userAddUser={roleName:e.newRoleName,functionCodes:s};var o=e.userAddUser;t.roleManagementAdd(o).then(function(s){t.roleManagement(n).then(function(t){e.messages=t.result,e.pageNum=Math.ceil((t.total-14)/9)+1,swal("添加完成")},function(e){console.log(e)})},function(e){console.log(e)})}}]),angular.module("myApp.controller").controller("signinController",["$scope","$state","init",function(e,t,n){e.signin=function(){n.userLogin(e.userName,e.password).then(function(n){e.token=n.result.token,sessionStorage.setItem("token",JSON.stringify(e.token)),t.go("page")},function(e){})}}]),angular.module("myApp.controller").controller("statisticsController",["$scope","$filter","init",function(e,t,n){e.selectCount=function(){e.eventCreateTimeFrom=t("date")(e.countBeforeTime,"yy-MM-dd"),e.eventCreateTimeTo=t("date")(e.countAfterTime,"yy-MM-dd"),e.eventTimeFrom=t("date")(e.countDinnerBeforeTime,"yy-MM-dd"),e.eventTimeTo=t("date")(e.countDinnerAfterTime,"yy-MM-dd"),n.DeclareCountQuery(e.eventCreateTimeFrom,e.eventCreateTimeTo,e.eventTimeFrom,e.eventTimeTo).then(function(t){e.userArr=t.result;var n=echarts.init(document.getElementById("carts")),s={title:{text:"数量"},tooltip:{},legend:{data:["数量"]},xAxis:{data:["根组织","新部门","Ramirez","City","Dr.Tai","老板"]},yAxis:{},series:[{name:"婚嫁",type:"bar",data:[e.userArr[0].type1Count,e.userArr[1].type1Count,e.userArr[2].type1Count,e.userArr[3].type1Count,e.userArr[4].type1Count,e.userArr[5].type1Count]},{name:"丧葬",type:"bar",data:[e.userArr[0].type2Count,e.userArr[1].type2Count,e.userArr[2].type2Count,e.userArr[3].type2Count,e.userArr[4].type2Count,e.userArr[5].type2Count]}]};n.setOption(s)},function(e){console.log(e)})}}]),angular.module("myApp.controller").controller("supervisionController",["$scope","init",function(e,t){e.md=function(n){t.details(n).then(function(t){e.isData=t,$("#myModal2").modal("toggle")},function(){})},e.user={staff:"",superviseStatus:-1,page:1,start:0,limit:9},t.superviseDemand(e.user).then(function(t){e.messages=t.result,e.pageNum=Math.ceil((t.total-14)/9)}),e.onePage=function(){e.user.page=1,e.user.start=0,t.superviseDemand(e.user).then(function(t){e.messages=t.result},function(){})},e.befor=function(){e.user.page=e.user.page-1,e.user.start=e.user.start-9,t.superviseDemand(e.user).then(function(t){e.messages=t.result},function(){})},e.after=function(){0!=e.messages.length&&(e.user.page=e.user.page+1,e.user.start=e.user.start+9,t.superviseDemand(e.user).then(function(t){e.messages=t.result},function(){}))},e.lastPage=function(){e.user.page=e.pageNum,e.user.start=9*(e.pageNum-1)+1,t.superviseDemand(e.user).then(function(t){e.messages=t.result},function(){})},e.supervisionPositiveSequenceOrder=function(n){e.messages=t.positiveSequenceOrder(n,e.messages)},e.supervisionInvertedOrder=function(n){e.messages=t.invertedOrder(n,e.messages)},e.superviseDemand=function(){e.isname&&(e.user.staff=e.isname),t.superviseDemand(e.user).then(function(t){e.messages=t.result,e.pageNum=Math.ceil((t.total-14)/9)})},e.isState="未监督",e.state0=function(){e.isState="未监督",e.user.superviseStatus=-1,t.superviseDemand(e.user).then(function(t){e.messages=t.result,e.pageNum=Math.ceil((t.total-14)/9)},function(){})},e.state1=function(){e.isState="已监督",e.user.superviseStatus=1,t.superviseDemand(e.user).then(function(t){e.messages=t.result,e.pageNum=Math.ceil((t.total-14)/9)},function(){})},e.getId=function(n){e.superviseReport=function(){e.userReport={eventId:n,title:e.title,content:e.content1},t.superviseReport(e.userReport).then(function(n){t.superviseDemand(e.user).then(function(t){e.messages=t.result,e.pageNum=Math.ceil((t.total-14)/9)},function(e){console.log(e)}),swal({title:"修改完成"})})}},e.getThisId=function(n){e.breakRule=function(){e.userRegister={eventId:n,isCashGiftOutOfLimits:e.status1,isUsePublicCar:e.status2,isUsePublicGoods:e.status3,isUsePublicAsserts:e.status4,isUsePublicMoney:e.status5,attachmentFileCode:"",otherQuestion:e.content0,content:e.content2},t.breakRule(e.userRegister).then(function(n){t.superviseDemand(e.user).then(function(t){e.messages=t.result,e.pageNum=Math.ceil((t.total-14)/9)},function(e){console.log(e)}),swal({title:"修改成功"})})}}}]),angular.module("myApp.controller").controller("userManagementController",["$scope","init",function(e,t){e.messages=[{username:"",name:"",orgName:"",id:""}],e.user={page:"",start:"",limit:""},e.user.page=1,e.user.start=0,e.user.limit=9;var n=e.user;t.userManagement(n).then(function(t){e.messages=t.result,e.pageNum=Math.ceil((t.total-14)/9)+2,console.log(e.messages)},function(e){console.log(e)}),e.onePage=function(){e.user.page=1,e.user.start=0,t.userManagement(e.user).then(function(t){console.log(t),e.messages=t.result},function(){})},e.befor=function(){e.user.page=e.user.page-1,e.user.start=e.user.start-9,t.userManagement(e.user).then(function(t){console.log(t),e.messages=t.result},function(){})},e.after=function(){0!=e.messages.length&&(e.user.page=e.user.page+1,e.user.start=e.user.start+9,t.userManagement(e.user).then(function(t){e.messages=t.result},function(){}))},e.lastPage=function(){e.user.page=e.pageNum,e.user.start=9*(e.pageNum-1)+1,t.userManagement(e.user).then(function(t){e.messages=t.result},function(){})},t.currentDepartment().then(function(t){t.result.children.unshift(t.result),e.departments=t.result.children},function(e){}),t.roleManagement(e.user).then(function(n){e.roleNum=n.total,e.user.limit=e.roleNum,t.roleManagement(e.user).then(function(t){e.user.limit=9,e.roles=t.result})}),e.theMessages=[{orgId:e.orgId,roleId:e.roleId,name:e.name,password:e.password,username:e.username}],e.userManagementGetAlter=function(n){$("#myModal").modal("toggle"),e.userGet={userId:n},e.password="",t.userManagementGetAlter(e.userGet).then(function(t){e.theMessages=t.result},function(e){console.log(e)})},e.userManagementUpdateAlter=function(n){t.userManagementUpdateAlter(e.theMessages,e.password).then(function(n){t.userManagement(e.user).then(function(t){e.messages=t.result,console.log(e.messages)},function(e){console.log(e)}),swal({title:"修改成功"})},function(e){console.log(e)})},e.userManagementDelete=function(n){e.userDelete={id:n};var s=e.userDelete;t.userManagementDelete(s).then(function(n){t.userManagement(s).then(function(t){e.messages=t.result,console.log(e.messages)},function(e){console.log(e)}),swal({title:"已删除"})},function(e){console.log(e)})},e.userAdd={orgId:"",username:"",name:"",password:"",roleId:""},e.userManagementAdd=function(){var n=e.userAdd;t.userManagementAdd(n).then(function(n){t.userManagement(e.user).then(function(t){e.messages=t.result,console.log(e.messages)},function(e){console.log(e)}),swal({title:"添加完成"})},function(e){console.log(e)})},e.md=function(){$("#myModal2").modal("toggle")},e.refuse=function(){swal({title:"修改成功"})}}]);